<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CREATE</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Latest compiled JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>


    <link href="css/estilos.css" rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Pacifico&display=swap"
        rel="stylesheet">

</head>

<body>
    <nav class="navbar navbar-expand-sm navbar-milsabores navbar-light">

        <div class="container-fluid">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="#">Soporte</a>
                </li>
            </ul>

            <a class="navbar-brand d-flex mx-auto" href="#">
                <img src="img/logo.jpg" alt="Logo" class="d-inline-block align-text-top logo">
            </a>

            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="carrito.html">Carrito</a>
                </li>
            </ul>
        </div>
    </nav>


    <nav class="navbar navbar-expand-sm navbar-light navbar-menu">
        <div class="container-fluid justify-content-center">

            <button class="navbar-toggler me-auto" type="button" data-bs-toggle="collapse"
                data-bs-target="#collapsibleNavbar">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="collapsibleNavbar">
                <ul class="navbar-nav gap-4">
                    <li class="nav-item">
                        <a class="nav-link" href="#">Inicio</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="#">Tienda</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="#">Blog</a>

                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="#">Locales</a>
                    </li>
                </ul>

            </div>

        </div>
    </nav>



    <!--Card + formulario para la creacion de productos-->
    <div class="container mt-4">
        <h3>Nuevo producto</h3>

        <form>
            <div class="card mt-3 mb-3 shadow-sm">
                <div class="card-header">Información Producto</div>
                <div class="card-body">


                    <div class="mb-3">
                        <label for="id-producto" class="form-label required">ID</label>
                        <input type="text" id="id-producto" class="form-control" placeholder="001D" required>
                    </div>

                    <div class="mb-3">
                        <label for="nombre-producto" class="form-label required">Nombre</label>
                        <input type="text" class="form-control" id="nombre-producto" placeholder="Ej: Torta cuadrada">
                    </div>


                    <div class="mb-3">
                        <label for="categoria" class="form-label required">Categoría</label>
                        <select class="form-select" id="categoria">
                            <option selected disabled>Seleccione una categoría</option>
                            <option value="tortas-cuadradas">Tortas Cuadradas</option>
                            <option value="tortas-circulares">Tortas Circulares</option>
                            <option value="postres-individuales">Postres Individuales</option>
                            <option value="producto-sin-azucar">Productos Sin Azúcar</option>
                            <option value="pasteleria-tradicional">Pastelería Tradicional</option>
                            <option value="producto-sin-gluten">Productos Sin Gluten</option>
                            <option value="producto-vegana">Productos Vegana</option>
                            <option value="tortas-especiales">Tortas Especiales</option>
                            <option value="nueva">+ Nueva Categoría</option>
                        </select>
                    </div>

                    <!--Modal para la nueva categoría-->
                    <div class="modal fade" id="modalCategoria" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">

                                <div class="modal-header">
                                    <h5 class="modal-title" id="modalCategoria">Nueva Categoría</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Cerrar"></button>
                                </div>

                                <div class="modal-body">
                                    <label for="idnuevaCategoria" class="form-label required">ID Categoría</label>
                                    <input type="text" id="idnuevaCategoria" class="form-control"
                                        placeholder="EJ: 001D">
                                </div>

                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary"
                                        data-bs-dismiss="modal">Cancelar</button>
                                    <button type="button" class="btn btn-primary" id="guardarCategoria">Guardar</button>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="mb-3">
                        <label for="descrip-producto" class="form-label">Descripción</label>
                        <textarea class="form-control" id="descrip-producto" rows="2"></textarea>
                    </div>

                    <div class="mb-3">
                        <label for="histo-producto" class="form-label">Historia</label>
                        <textarea class="form-control" id="histo-producto" rows="2"></textarea>
                    </div>

                    <div class="mb-3">
                        <label for="img-producto" class="form-label required">Imagen</label>
                        <input class="form-control" id="img-producto" type="file" accept="image/*">
                    </div>

                </div>
            </div>

            <div class="card mb-3 shadow-sm">
                <div class="card-header">Control de Stock y precios</div>
                <div class="card-body">

                    <div class="mb-3">
                        <label for="precio" class="form-label required">Precio</label>
                        <input type="number" id="precio" class="form-control" placeholder="1000" required>
                    </div>

                    <div class="mb-3">
                        <label for="descuento" class="form-label">Descuento</label>
                        <input type="number" id="descuento" class="form-control" placeholder="1000">
                    </div>

                    <div class="mb-3">
                        <label for="stock" class="form-label required">Stock</label>
                        <input type="number" id="stock" class="form-control" placeholder="100" required>
                    </div>

                    <div class="mb-3">
                        <label for="estado" class="form-label required">Estado</label>
                        <select class="form-select" id="estado">
                            <option selected disabled>Seleccione Estado producto</option>
                            <option value="activo">Activo</option>
                            <option value="inactivo">Inactivo</option>
                        </select>
                    </div>
                </div>

            </div>

            <button type="submit" class="btn button-submit">Guardar</button>

        </form>
    </div>


</body>

</html>

<script>
    const categoriaSelect = document.getElementById("categoria");
    const modal = new bootstrap.Modal(document.getElementById("modalCategoria"));
    const guardarBtn = document.getElementById("guardarCategoria");

    // Abrir modal si se selecciona "nueva"
    categoriaSelect.addEventListener("change", function () {
        if (this.value === "nueva") {
            modal.show();
        }
    });

    // Guardar nueva categoría
    guardarBtn.addEventListener("click", function () {
        const nuevaCategoria = document.getElementById("nuevaCategoria").value.trim();
        if (nuevaCategoria !== "") {
            // Crear nueva opción
            const option = document.createElement("option");
            option.value = nuevaCategoria.toLowerCase().replace(/\s+/g, "-");
            option.textContent = nuevaCategoria;

            // Insertar antes de "nueva"
            categoriaSelect.insertBefore(option, categoriaSelect.querySelector("option[value='nueva']"));

            // Seleccionar la nueva categoría
            categoriaSelect.value = option.value;

            // Cerrar modal y limpiar input
            modal.hide();
            document.getElementById("nuevaCategoria").value = "";
        }
    });
</script>